import{_ as s,c as a,o as l,Q as n}from"./chunks/framework.1cc28bed.js";const h=JSON.parse('{"title":"达梦8","description":"","frontmatter":{},"headers":[],"relativePath":"code/db/dameng8.md","filePath":"code/db/dameng8.md","lastUpdated":1698740150000}'),p={name:"code/db/dameng8.md"},o=n(`<h1 id="达梦8" tabindex="-1">达梦8 <a class="header-anchor" href="#达梦8" aria-label="Permalink to &quot;达梦8&quot;">​</a></h1><h2 id="错误排查" tabindex="-1">错误排查 <a class="header-anchor" href="#错误排查" aria-label="Permalink to &quot;错误排查&quot;">​</a></h2><h3 id="_6811-结果集总数超过限制" tabindex="-1">-6811 结果集总数超过限制 <a class="header-anchor" href="#_6811-结果集总数超过限制" aria-label="Permalink to &quot;-6811 结果集总数超过限制&quot;">​</a></h3><p>从<a href="https://eco.dameng.com/document/dm/zh-cn/pm/programmer-appendix.html" target="_blank" rel="noreferrer">错误码文档</a>来看，值域在 (-6001,-8000) 为<strong>运行时错误</strong>，但并没有具体引起错误的原因。检索 QA 可有如下解决方案。</p><p>修改下列两个参数的阈值</p><ul><li><code>RESULT_SET_LIMIT</code> 一次请求可以生成的结果集最大个数</li><li><code>SESSION_RESULT_SET_LIMIT</code> 会话上结果集个数的上限</li></ul><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> para_name,para_value </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> v$dm_ini </span><span style="color:#F97583;">where</span><span style="color:#E1E4E8;"> para_name </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> (</span><span style="color:#9ECBFF;">&#39;RESULT_SET_LIMIT&#39;</span><span style="color:#E1E4E8;">,</span><span style="color:#9ECBFF;">&#39;SESSION_RESULT_SET_LIMIT&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">SP_SET_PARA_VALUE(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">,</span><span style="color:#9ECBFF;">&#39;SESSION_RESULT_SET_LIMIT&#39;</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">20000</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">SP_SET_PARA_VALUE(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">,</span><span style="color:#9ECBFF;">&#39;RESULT_SET_LIMIT&#39;</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">20000</span><span style="color:#E1E4E8;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> para_name,para_value </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> v$dm_ini </span><span style="color:#D73A49;">where</span><span style="color:#24292E;"> para_name </span><span style="color:#D73A49;">in</span><span style="color:#24292E;"> (</span><span style="color:#032F62;">&#39;RESULT_SET_LIMIT&#39;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;SESSION_RESULT_SET_LIMIT&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">SP_SET_PARA_VALUE(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;SESSION_RESULT_SET_LIMIT&#39;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">20000</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">SP_SET_PARA_VALUE(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;RESULT_SET_LIMIT&#39;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">20000</span><span style="color:#24292E;">);</span></span></code></pre></div><h2 id="文档" tabindex="-1">文档 <a class="header-anchor" href="#文档" aria-label="Permalink to &quot;文档&quot;">​</a></h2><ul><li><a href="https://eco.dameng.com/user-center/post" target="_blank" rel="noreferrer">达梦社区发帖中心</a></li><li><a href="https://eco.dameng.com/document/dm/zh-cn/pm/dpi-rogramming-guide.html" target="_blank" rel="noreferrer">DPI 编程指南</a></li><li><a href="https://eco.dameng.com/document/dm/zh-cn/pm/dm8_sql-data-types-operators" target="_blank" rel="noreferrer">DMSQL 程序数据类型与操作符</a></li><li><a href="https://eco.dameng.com/document/dm/zh-cn/faq/faq-errorcode.html" target="_blank" rel="noreferrer">SQL 执行错误码</a></li><li><a href="https://eco.dameng.com/document/dm/zh-cn/pm/programmer-appendix.html" target="_blank" rel="noreferrer">DM 服务器错误码/ DPI 程序开发错误码</a></li></ul><h2 id="创建" tabindex="-1">创建 <a class="header-anchor" href="#创建" aria-label="Permalink to &quot;创建&quot;">​</a></h2><h3 id="创建数据库-db" tabindex="-1">创建数据库 (db) <a class="header-anchor" href="#创建数据库-db" aria-label="Permalink to &quot;创建数据库 (db)&quot;">​</a></h3><p>使用以下语句创建一个名为 <code>example_db</code> 的数据库：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">CREATE</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">DATABASE</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">example_db</span><span style="color:#E1E4E8;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">CREATE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">DATABASE</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">example_db</span><span style="color:#24292E;">;</span></span></code></pre></div><h3 id="创建用户" tabindex="-1">创建用户 <a class="header-anchor" href="#创建用户" aria-label="Permalink to &quot;创建用户&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">CREATE</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">USER</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">username</span><span style="color:#E1E4E8;"> IDENTIFIED </span><span style="color:#F97583;">BY</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">password</span><span style="color:#E1E4E8;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">CREATE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">USER</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">username</span><span style="color:#24292E;"> IDENTIFIED </span><span style="color:#D73A49;">BY</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">password</span><span style="color:#24292E;">;</span></span></code></pre></div><p>其中，username 是要创建的用户名，password 是用户密码。可以根据需要给用户分配不同的权限。</p><p>例如，如果要给用户分配读取和写入表的权限，可以使用以下语句：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">GRANT</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">SELECT</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">INSERT</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">ON</span><span style="color:#E1E4E8;"> table_name </span><span style="color:#F97583;">TO</span><span style="color:#E1E4E8;"> username;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">GRANT</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">SELECT</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">INSERT</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">ON</span><span style="color:#24292E;"> table_name </span><span style="color:#D73A49;">TO</span><span style="color:#24292E;"> username;</span></span></code></pre></div><p>其中，table_name 是要授权的表名，username 是要授权的用户名。通过 GRANT 命令可以给用户分配不同的权限。</p><p>需要注意的是，要创建用户需要有足够的权限，通常需要使用系统管理员账户进行操作。</p><h3 id="创建模式-schema" tabindex="-1">创建模式 (schema) <a class="header-anchor" href="#创建模式-schema" aria-label="Permalink to &quot;创建模式 (schema)&quot;">​</a></h3><p>在达梦数据库中，模式和用户是紧密相关的。模式可以看做是用户的命名空间，它允许用户在一个独立的环境下创建对象。</p><p>使用以下语句创建名为 <code>example_schema</code> 的模式：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">CREATE</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">SCHEMA</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">example_schema</span><span style="color:#E1E4E8;"> AUTHORIZATION user_name;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">CREATE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">SCHEMA</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">example_schema</span><span style="color:#24292E;"> AUTHORIZATION user_name;</span></span></code></pre></div><p>这里的 <code>user_name</code> 应替换为你要为该模式指定所有权的用户名称。</p><h3 id="创建表-table" tabindex="-1">创建表 (table) <a class="header-anchor" href="#创建表-table" aria-label="Permalink to &quot;创建表 (table)&quot;">​</a></h3><p>使用以下语句创建名为 <code>example_table</code> 的表：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">CREATE</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">TABLE</span><span style="color:#E1E4E8;"> &quot;</span><span style="color:#B392F0;">example_schema</span><span style="color:#E1E4E8;">&quot;.</span><span style="color:#9ECBFF;">&quot;example_table&quot;</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">  id </span><span style="color:#F97583;">INTEGER</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">PRIMARY KEY</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">name</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">VARCHAR</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">50</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">NOT NULL</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  age </span><span style="color:#F97583;">INTEGER</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">NOT NULL</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  email </span><span style="color:#F97583;">VARCHAR</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">255</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">NOT NULL</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">UNIQUE</span></span>
<span class="line"><span style="color:#E1E4E8;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">CREATE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> &quot;</span><span style="color:#6F42C1;">example_schema</span><span style="color:#24292E;">&quot;.</span><span style="color:#032F62;">&quot;example_table&quot;</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">  id </span><span style="color:#D73A49;">INTEGER</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">PRIMARY KEY</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">name</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">VARCHAR</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">50</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">NOT NULL</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  age </span><span style="color:#D73A49;">INTEGER</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">NOT NULL</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  email </span><span style="color:#D73A49;">VARCHAR</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">255</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">NOT NULL</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">UNIQUE</span></span>
<span class="line"><span style="color:#24292E;">);</span></span></code></pre></div><p>这将在 <code>example_schema</code> 模式下创建一个具有 <code>id</code>、<code>name</code>、<code>age</code> 和 <code>email</code> 列的表。其中，<code>id</code> 列作为主键，<code>email</code> 列具有唯一约束条件。你可以将这些列改为适合你的应用程序的名称和数据类型。</p><h2 id="插入" tabindex="-1">插入 <a class="header-anchor" href="#插入" aria-label="Permalink to &quot;插入&quot;">​</a></h2><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">insert into</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;example_schema&quot;</span><span style="color:#E1E4E8;">.</span><span style="color:#9ECBFF;">&quot;example_table&quot;</span><span style="color:#E1E4E8;">(id, </span><span style="color:#F97583;">name</span><span style="color:#E1E4E8;">, age, email) </span></span>
<span class="line"><span style="color:#F97583;">values</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;lisa&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">19</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;lihua@li.com&#39;</span><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">insert into</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;example_schema&quot;</span><span style="color:#24292E;">.</span><span style="color:#032F62;">&quot;example_table&quot;</span><span style="color:#24292E;">(id, </span><span style="color:#D73A49;">name</span><span style="color:#24292E;">, age, email) </span></span>
<span class="line"><span style="color:#D73A49;">values</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;lisa&#39;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">19</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;lihua@li.com&#39;</span><span style="color:#24292E;">)</span></span></code></pre></div><h2 id="查询" tabindex="-1">查询 <a class="header-anchor" href="#查询" aria-label="Permalink to &quot;查询&quot;">​</a></h2><p>查询 object</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">top</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">name</span><span style="color:#E1E4E8;">,id </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> sysobjects;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">top</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">10</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">name</span><span style="color:#24292E;">,id </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> sysobjects;</span></span></code></pre></div><p>查询列类型</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">SELECT</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">DBMS_METADATA</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">GET_DDL</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;TABLE&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;sysobjects&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;SYSDBA&#39;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">FROM</span><span style="color:#E1E4E8;"> DUAL;</span></span>
<span class="line"><span style="color:#6A737D;">-- 或者</span></span>
<span class="line"><span style="color:#F97583;">DESC</span><span style="color:#E1E4E8;"> sysobjects;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">SELECT</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">DBMS_METADATA</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">GET_DDL</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;TABLE&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;sysobjects&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;SYSDBA&#39;</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">FROM</span><span style="color:#24292E;"> DUAL;</span></span>
<span class="line"><span style="color:#6A737D;">-- 或者</span></span>
<span class="line"><span style="color:#D73A49;">DESC</span><span style="color:#24292E;"> sysobjects;</span></span></code></pre></div><p>查看数据库</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">SELECT</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">FROM</span><span style="color:#E1E4E8;"> v$</span><span style="color:#F97583;">database</span><span style="color:#E1E4E8;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">SELECT</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">FROM</span><span style="color:#24292E;"> v$</span><span style="color:#D73A49;">database</span><span style="color:#24292E;">;</span></span></code></pre></div><p>查看schema</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">SELECT</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">FROM</span><span style="color:#E1E4E8;"> dba_objects </span><span style="color:#F97583;">WHERE</span><span style="color:#E1E4E8;"> object_type </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;SCH&#39;</span><span style="color:#E1E4E8;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">SELECT</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">FROM</span><span style="color:#24292E;"> dba_objects </span><span style="color:#D73A49;">WHERE</span><span style="color:#24292E;"> object_type </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;SCH&#39;</span><span style="color:#24292E;">;</span></span></code></pre></div><p>查看表空间的名称和大小</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">name</span><span style="color:#E1E4E8;">, total_size </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> sf_get_page_size() </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1024</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1024</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">||</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;M&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> v$tablespace;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">name</span><span style="color:#24292E;">, total_size </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> sf_get_page_size() </span><span style="color:#D73A49;">/</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1024</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">/</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1024</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">||</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;M&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> v$tablespace;</span></span></code></pre></div><p>查看表空间物理文件的名称和大小</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">t</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">name</span><span style="color:#E1E4E8;"> tablespace_name, </span><span style="color:#79B8FF;">t</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">id</span><span style="color:#E1E4E8;"> file_id, </span><span style="color:#79B8FF;">d</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">path</span><span style="color:#E1E4E8;"> file_name, </span><span style="color:#79B8FF;">d</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">total_size</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> sf_get_page_size() </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1024</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1024</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">||</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;M&#39;</span><span style="color:#E1E4E8;"> total_space </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> v$tablespace t, v$datafile d </span><span style="color:#F97583;">where</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">t</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">id</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">d</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">group_id</span><span style="color:#E1E4E8;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">t</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">name</span><span style="color:#24292E;"> tablespace_name, </span><span style="color:#005CC5;">t</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">id</span><span style="color:#24292E;"> file_id, </span><span style="color:#005CC5;">d</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">path</span><span style="color:#24292E;"> file_name, </span><span style="color:#005CC5;">d</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">total_size</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> sf_get_page_size() </span><span style="color:#D73A49;">/</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1024</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">/</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1024</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">||</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;M&#39;</span><span style="color:#24292E;"> total_space </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> v$tablespace t, v$datafile d </span><span style="color:#D73A49;">where</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">t</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">id</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">d</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">group_id</span><span style="color:#24292E;">;</span></span></code></pre></div><p>查看表空间使用情况</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">t1</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">NAME</span><span style="color:#E1E4E8;"> tablespace_name, </span><span style="color:#79B8FF;">t2</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">FREE_SIZE</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> SF_GET_PAGE_SIZE() </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1024</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1024</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">||</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;M&#39;</span><span style="color:#E1E4E8;"> free_space, </span><span style="color:#79B8FF;">t2</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">TOTAL_SIZE</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> SF_GET_PAGE_SIZE() </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1024</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1024</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">||</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;M&#39;</span><span style="color:#E1E4E8;"> total_space, </span><span style="color:#79B8FF;">t2</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">FREE_SIZE</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">100</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">t2</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">total_size</span><span style="color:#9ECBFF;">&quot; % FREE&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> V$TABLESPACE t1, V$DATAFILE t2 </span><span style="color:#F97583;">where</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">t1</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">ID</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">t2</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">GROUP_ID</span><span style="color:#E1E4E8;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">t1</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">NAME</span><span style="color:#24292E;"> tablespace_name, </span><span style="color:#005CC5;">t2</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">FREE_SIZE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> SF_GET_PAGE_SIZE() </span><span style="color:#D73A49;">/</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1024</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">/</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1024</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">||</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;M&#39;</span><span style="color:#24292E;"> free_space, </span><span style="color:#005CC5;">t2</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">TOTAL_SIZE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> SF_GET_PAGE_SIZE() </span><span style="color:#D73A49;">/</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1024</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">/</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1024</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">||</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;M&#39;</span><span style="color:#24292E;"> total_space, </span><span style="color:#005CC5;">t2</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">FREE_SIZE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">100</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">/</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">t2</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">total_size</span><span style="color:#032F62;">&quot; % FREE&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> V$TABLESPACE t1, V$DATAFILE t2 </span><span style="color:#D73A49;">where</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">t1</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">ID</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">t2</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">GROUP_ID</span><span style="color:#24292E;">;</span></span></code></pre></div><p>查看控制文件</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> para_value </span><span style="color:#F97583;">name</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> v$dm_ini </span><span style="color:#F97583;">where</span><span style="color:#E1E4E8;"> para_name</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&#39;CTL_PATH&#39;</span><span style="color:#E1E4E8;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> para_value </span><span style="color:#D73A49;">name</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> v$dm_ini </span><span style="color:#D73A49;">where</span><span style="color:#24292E;"> para_name</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&#39;CTL_PATH&#39;</span><span style="color:#24292E;">;</span></span></code></pre></div><p>查看日志文件大小</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">PATH</span><span style="color:#E1E4E8;">, RLOG_SIZE </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1024</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1024</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">||</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;M&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> v$rlogfile;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">PATH</span><span style="color:#24292E;">, RLOG_SIZE </span><span style="color:#D73A49;">/</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1024</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">/</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1024</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">||</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;M&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> v$rlogfile;</span></span></code></pre></div><p>查看数据库对象</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">t2</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">name</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">owner</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">t1</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">subtype</span><span style="color:#E1E4E8;">$ object_type, </span><span style="color:#79B8FF;">t1</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">valid</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">status</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">count</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">) count#  </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> sysobjects t1, sysobjects t2 </span><span style="color:#F97583;">where</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">t1</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">schid</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">t2</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">id</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">and</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">t1</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">schid</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">!=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">group by</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">t2</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">name</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">t1</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">subtype</span><span style="color:#E1E4E8;">$, </span><span style="color:#79B8FF;">t1</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">valid</span><span style="color:#E1E4E8;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">t2</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">name</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">owner</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">t1</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">subtype</span><span style="color:#24292E;">$ object_type, </span><span style="color:#005CC5;">t1</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">valid</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">status</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">count</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">) count#  </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> sysobjects t1, sysobjects t2 </span><span style="color:#D73A49;">where</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">t1</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">schid</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">t2</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">id</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">and</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">t1</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">schid</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">!=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">group by</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">t2</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">name</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">t1</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">subtype</span><span style="color:#24292E;">$, </span><span style="color:#005CC5;">t1</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">valid</span><span style="color:#24292E;">;</span></span></code></pre></div><p>查看数据库创建日期和归档方式</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> create_time, </span><span style="color:#F97583;">case</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">when</span><span style="color:#E1E4E8;"> arch_mode </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;n&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">then</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;非归档模式&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;归档模式&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">end</span><span style="color:#E1E4E8;"> arch </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> v$</span><span style="color:#F97583;">database</span><span style="color:#E1E4E8;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> create_time, </span><span style="color:#D73A49;">case</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">when</span><span style="color:#24292E;"> arch_mode </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;n&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">then</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;非归档模式&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;归档模式&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">end</span><span style="color:#24292E;"> arch </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> v$</span><span style="color:#D73A49;">database</span><span style="color:#24292E;">;</span></span></code></pre></div><p>查看object分类数量</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> subtype$ object_type, </span><span style="color:#79B8FF;">count</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">) quantity </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> sysobjects </span><span style="color:#F97583;">where</span><span style="color:#E1E4E8;"> subtype$ </span><span style="color:#F97583;">&lt;&gt;</span><span style="color:#9ECBFF;">&#39;&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">group by</span><span style="color:#E1E4E8;"> subtype$ </span><span style="color:#F97583;">union</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;column&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">count</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> syscolumns;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> subtype$ object_type, </span><span style="color:#005CC5;">count</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">) quantity </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> sysobjects </span><span style="color:#D73A49;">where</span><span style="color:#24292E;"> subtype$ </span><span style="color:#D73A49;">&lt;&gt;</span><span style="color:#032F62;">&#39;&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">group by</span><span style="color:#24292E;"> subtype$ </span><span style="color:#D73A49;">union</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;column&#39;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">count</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> syscolumns;</span></span></code></pre></div><h2 id="技巧" tabindex="-1">技巧 <a class="header-anchor" href="#技巧" aria-label="Permalink to &quot;技巧&quot;">​</a></h2><h3 id="获取自增-id" tabindex="-1">获取自增 ID <a class="header-anchor" href="#获取自增-id" aria-label="Permalink to &quot;获取自增 ID&quot;">​</a></h3><blockquote><p><a href="https://eco.dameng.com/document/dm/zh-cn/pm/management-table.html#9.6.2%20%E6%9F%A5%E7%9C%8B%E8%87%AA%E5%A2%9E%E5%88%97%E4%BF%A1%E6%81%AF" target="_blank" rel="noreferrer">官方 查看自增列信息</a></p></blockquote><ol><li><code>IDENT_CURRENT</code>：获得表上自增列的当前值；</li><li><code>IDENT_SEED</code>：获得表上自增列的种子信息；</li><li><code>IDENT_INCR</code>：获得表上自增列的增量信息。</li></ol><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">-- IDENTITY</span></span>
<span class="line"><span style="color:#F97583;">CREATE</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">TABLE</span><span style="color:#E1E4E8;"> &quot;</span><span style="color:#B392F0;">TEST_BMY</span><span style="color:#E1E4E8;">&quot;.</span><span style="color:#9ECBFF;">&quot;IDENT_TABLE_T2&quot;</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">  C1 </span><span style="color:#F97583;">INT</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">IDENTITY</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">),</span></span>
<span class="line"><span style="color:#E1E4E8;">  C2 </span><span style="color:#F97583;">INT</span></span>
<span class="line"><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">insert into</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;TEST_BMY&quot;</span><span style="color:#E1E4E8;">.</span><span style="color:#9ECBFF;">&quot;IDENT_TABLE_T2&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">values</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">SELECT</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">IDENT_CURRENT</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;TEST_BMY.IDENT_TABLE_T2&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">SELECT</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">IDENT_SEED</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;TEST_BMY.IDENT_TABLE_T2&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">SELECT</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">IDENT_INCR</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;TEST_BMY.IDENT_TABLE_T2&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#6A737D;">-- AUTO_INCREMENT</span></span>
<span class="line"><span style="color:#F97583;">CREATE</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">TABLE</span><span style="color:#E1E4E8;"> &quot;</span><span style="color:#B392F0;">SYSDBA</span><span style="color:#E1E4E8;">&quot;.</span><span style="color:#9ECBFF;">&quot;TABLE_8&quot;</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">&quot;ID&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">INT</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">PRIMARY KEY</span><span style="color:#E1E4E8;"> AUTO_INCREMENT ,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">&quot;NAME&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">CHAR</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">insert into</span><span style="color:#E1E4E8;"> TABLE_8(</span><span style="color:#F97583;">name</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">values</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;test&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> LAST_INSERT_ID</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">-- IDENTITY</span></span>
<span class="line"><span style="color:#D73A49;">CREATE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> &quot;</span><span style="color:#6F42C1;">TEST_BMY</span><span style="color:#24292E;">&quot;.</span><span style="color:#032F62;">&quot;IDENT_TABLE_T2&quot;</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">  C1 </span><span style="color:#D73A49;">INT</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">IDENTITY</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">  C2 </span><span style="color:#D73A49;">INT</span></span>
<span class="line"><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#D73A49;">insert into</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;TEST_BMY&quot;</span><span style="color:#24292E;">.</span><span style="color:#032F62;">&quot;IDENT_TABLE_T2&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">values</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">3</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">SELECT</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">IDENT_CURRENT</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;TEST_BMY.IDENT_TABLE_T2&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#D73A49;">SELECT</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">IDENT_SEED</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;TEST_BMY.IDENT_TABLE_T2&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#D73A49;">SELECT</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">IDENT_INCR</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;TEST_BMY.IDENT_TABLE_T2&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#6A737D;">-- AUTO_INCREMENT</span></span>
<span class="line"><span style="color:#D73A49;">CREATE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> &quot;</span><span style="color:#6F42C1;">SYSDBA</span><span style="color:#24292E;">&quot;.</span><span style="color:#032F62;">&quot;TABLE_8&quot;</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">&quot;ID&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">INT</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">PRIMARY KEY</span><span style="color:#24292E;"> AUTO_INCREMENT ,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">&quot;NAME&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">CHAR</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">10</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#D73A49;">insert into</span><span style="color:#24292E;"> TABLE_8(</span><span style="color:#D73A49;">name</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">values</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;test&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> LAST_INSERT_ID</span></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">两种方法</p><p>建表的时候用 <strong>IDENTITY</strong> 则使用 <code>select @@IDENTITY;</code> 查询(类似于mysql)<br> 建表使用 <strong>PRIMARY KEY AUTO_INCREMENT</strong> 则使用 <code>select LAST_INSERT_ID;</code> 进行查询(类似于oracle)</p></div><h2 id="dpi-开发" tabindex="-1">DPI 开发 <a class="header-anchor" href="#dpi-开发" aria-label="Permalink to &quot;DPI 开发&quot;">​</a></h2><div class="tip custom-block"><p class="custom-block-title">开发 demo</p><p>具体代码实现，可以参考<a href="https://github.com/cat-chat-meow/dameng" target="_blank" rel="noreferrer">此项目</a></p></div><p>关于绑定变量，执行 insert 语句时</p><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// CITY VARCHAR</span></span>
<span class="line"><span style="color:#6A737D;">// correct</span></span>
<span class="line"><span style="color:#E1E4E8;">sdbyte sql[] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;INSERT INTO TEST001 (NAME, CITY) values(&#39;haha&#39;, ?)&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#6A737D;">// wrong</span></span>
<span class="line"><span style="color:#E1E4E8;">sdbyte sql[] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;INSERT INTO TEST001 (NAME, CITY) values(&#39;haha&#39;, &#39;?&#39;)&quot;</span><span style="color:#E1E4E8;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// CITY VARCHAR</span></span>
<span class="line"><span style="color:#6A737D;">// correct</span></span>
<span class="line"><span style="color:#24292E;">sdbyte sql[] </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;INSERT INTO TEST001 (NAME, CITY) values(&#39;haha&#39;, ?)&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#6A737D;">// wrong</span></span>
<span class="line"><span style="color:#24292E;">sdbyte sql[] </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;INSERT INTO TEST001 (NAME, CITY) values(&#39;haha&#39;, &#39;?&#39;)&quot;</span><span style="color:#24292E;">;</span></span></code></pre></div><p>但是，对于 select 绑定变量时，入参需要加引号？</p><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// c1 VARCHAR c2 INT</span></span>
<span class="line"><span style="color:#6A737D;">// wrong</span></span>
<span class="line"><span style="color:#E1E4E8;">sdbyte sql[] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;select c1,c2,c3 from dpi_demo where c1 = ?&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#6A737D;">// correct</span></span>
<span class="line"><span style="color:#E1E4E8;">sdbyte sql[] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;select c1,c2,c3 from dpi_demo where c1 = &#39;?&#39; and c2 = ?&quot;</span><span style="color:#E1E4E8;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// c1 VARCHAR c2 INT</span></span>
<span class="line"><span style="color:#6A737D;">// wrong</span></span>
<span class="line"><span style="color:#24292E;">sdbyte sql[] </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;select c1,c2,c3 from dpi_demo where c1 = ?&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#6A737D;">// correct</span></span>
<span class="line"><span style="color:#24292E;">sdbyte sql[] </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;select c1,c2,c3 from dpi_demo where c1 = &#39;?&#39; and c2 = ?&quot;</span><span style="color:#24292E;">;</span></span></code></pre></div><h2 id="迁移" tabindex="-1">迁移 <a class="header-anchor" href="#迁移" aria-label="Permalink to &quot;迁移&quot;">​</a></h2><h3 id="从-mysql-迁移" tabindex="-1">从 mysql 迁移 <a class="header-anchor" href="#从-mysql-迁移" aria-label="Permalink to &quot;从 mysql 迁移&quot;">​</a></h3><h4 id="方法变更" tabindex="-1">方法变更 <a class="header-anchor" href="#方法变更" aria-label="Permalink to &quot;方法变更&quot;">​</a></h4><table><thead><tr><th style="text-align:left;"></th><th style="text-align:left;">mysql</th><th style="text-align:left;">方法说明</th><th style="text-align:left;">达梦</th><th style="text-align:left;"><a href="https://eco.dameng.com/document/dm/zh-cn/pm/dpi-rogramming-guide.html" target="_blank" rel="noreferrer">方法说明</a></th></tr></thead><tbody><tr><td style="text-align:left;">转义 escape</td><td style="text-align:left;"><code>mysql_real_escape_string</code></td><td style="text-align:left;"></td><td style="text-align:left;">null</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">初始化 init</td><td style="text-align:left;"><code>mysql_library_init</code></td><td style="text-align:left;"></td><td style="text-align:left;">null</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">当前列集合 fetch length</td><td style="text-align:left;"><code>mysql_fetch_lengths</code></td><td style="text-align:left;">数组的每一个元素对应结果集中的一列数据，该元素的值表示该列在结果集中所查询到的数据大小</td><td style="text-align:left;">null</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">释放结果集 free ret</td><td style="text-align:left;"><code>mysql_free_result</code></td><td style="text-align:left;"></td><td style="text-align:left;"><code>dpi_free_con</code></td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">列数 cols</td><td style="text-align:left;"><code>mysql_field_count</code></td><td style="text-align:left;"></td><td style="text-align:left;"><code>dpi_number_columns</code></td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">查询行数/影响行数</td><td style="text-align:left;"><a href="https://dev.mysql.com/doc/c-api/5.7/en/mysql-affected-rows.html" target="_blank" rel="noreferrer"><code>mysql_affected_rows</code></a></td><td style="text-align:left;"><code>mysql_affected_rows()</code> may be called immediately after executing a statement with <code>mysql_real_query()</code> or <code>mysql_query()</code>. It returns the number of rows changed, deleted, or inserted by the last statement if it was an UPDATE, DELETE, or INSERT. For SELECT statements, <code>mysql_affected_rows()</code> works like <code>mysql_num_rows()</code>.</td><td style="text-align:left;"><code>dpi_row_count</code></td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">获取当前连接的结果集</td><td style="text-align:left;"><code>mysql_store_result</code></td><td style="text-align:left;"></td><td style="text-align:left;"><code>dpi_fetch_scroll</code>/<code>dpi_fetch</code></td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">获取上一次插入操作的自增长 ID 值</td><td style="text-align:left;"><code>mysql_insert_id</code></td><td style="text-align:left;"></td><td style="text-align:left;">null</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">获取每行数据</td><td style="text-align:left;"><code>mysql_fetch_row</code></td><td style="text-align:left;"></td><td style="text-align:left;"><code>dpi_fetch</code></td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">...</td><td style="text-align:left;">...</td><td style="text-align:left;">...</td><td style="text-align:left;">...</td><td style="text-align:left;">...</td></tr></tbody></table><h4 id="开发实践" tabindex="-1">开发实践 <a class="header-anchor" href="#开发实践" aria-label="Permalink to &quot;开发实践&quot;">​</a></h4><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-ioSBH" id="tab-895WvnI" checked="checked"><label for="tab-895WvnI">mysql</label><input type="radio" name="group-ioSBH" id="tab-LIc8kou"><label for="tab-LIc8kou">dameng8</label></div><div class="blocks"><div class="language-cpp vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">MYSQL_ROW row;</span></span>
<span class="line"><span style="color:#F97583;">unsigned</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">long</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">lengths;</span></span>
<span class="line"><span style="color:#F97583;">unsigned</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">int</span><span style="color:#E1E4E8;"> num_fields;</span></span>
<span class="line"><span style="color:#F97583;">unsigned</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">int</span><span style="color:#E1E4E8;"> i;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">row </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">mysql_fetch_row</span><span style="color:#E1E4E8;">(result);</span></span>
<span class="line"><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (row)</span></span>
<span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">    num_fields </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">mysql_num_fields</span><span style="color:#E1E4E8;">(result);</span></span>
<span class="line"><span style="color:#6A737D;">    // also, can use num_fields = mysql_field_count(MYSQL *mysql).</span></span>
<span class="line"><span style="color:#E1E4E8;">    lengths </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">mysql_fetch_lengths</span><span style="color:#E1E4E8;">(result);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;">(i </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">; i </span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;"> num_fields; i</span><span style="color:#F97583;">++</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">printf</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;Column </span><span style="color:#79B8FF;">%u</span><span style="color:#9ECBFF;"> is </span><span style="color:#79B8FF;">%lu</span><span style="color:#9ECBFF;"> bytes in length.</span><span style="color:#79B8FF;">\\n</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">              i, lengths[i]);</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">MYSQL_ROW row;</span></span>
<span class="line"><span style="color:#D73A49;">unsigned</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">long</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;">lengths;</span></span>
<span class="line"><span style="color:#D73A49;">unsigned</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> num_fields;</span></span>
<span class="line"><span style="color:#D73A49;">unsigned</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> i;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">row </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">mysql_fetch_row</span><span style="color:#24292E;">(result);</span></span>
<span class="line"><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (row)</span></span>
<span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">    num_fields </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">mysql_num_fields</span><span style="color:#24292E;">(result);</span></span>
<span class="line"><span style="color:#6A737D;">    // also, can use num_fields = mysql_field_count(MYSQL *mysql).</span></span>
<span class="line"><span style="color:#24292E;">    lengths </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">mysql_fetch_lengths</span><span style="color:#24292E;">(result);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">for</span><span style="color:#24292E;">(i </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">; i </span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;"> num_fields; i</span><span style="color:#D73A49;">++</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">printf</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;Column </span><span style="color:#005CC5;">%u</span><span style="color:#032F62;"> is </span><span style="color:#005CC5;">%lu</span><span style="color:#032F62;"> bytes in length.</span><span style="color:#005CC5;">\\n</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">              i, lengths[i]);</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// todo</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// todo</span></span></code></pre></div></div></div><h2 id="其他" tabindex="-1">其他 <a class="header-anchor" href="#其他" aria-label="Permalink to &quot;其他&quot;">​</a></h2><h3 id="系统表" tabindex="-1">系统表 <a class="header-anchor" href="#系统表" aria-label="Permalink to &quot;系统表&quot;">​</a></h3><table><thead><tr><th style="text-align:left;">系统表</th><th style="text-align:left;"></th></tr></thead><tbody><tr><td style="text-align:left;"><code>SYSOBJECTS</code></td><td style="text-align:left;">可查询所有对象</td></tr><tr><td style="text-align:left;"><code>SYSCOLUMNS</code></td><td style="text-align:left;">可查询表的所有列的信息</td></tr><tr><td style="text-align:left;"><code>dba_objects</code></td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;"><code>dba_tables</code></td><td style="text-align:left;">可查询表信息（包括系统表）</td></tr><tr><td style="text-align:left;"><code>dba_users</code></td><td style="text-align:left;">可查询系统所有用户</td></tr><tr><td style="text-align:left;"><code>dba_data_files</code></td><td style="text-align:left;">可查询数据库文件信息</td></tr><tr><td style="text-align:left;"><code>dba_segments</code></td><td style="text-align:left;">可查询模式</td></tr><tr><td style="text-align:left;"><code>all_tables</code></td><td style="text-align:left;">可查询所有用户的表</td></tr><tr><td style="text-align:left;"><code>user_tables</code></td><td style="text-align:left;">可查询当前用户所拥有的所有表</td></tr><tr><td style="text-align:left;"><code>user_tablespaces</code></td><td style="text-align:left;">可查询表空间</td></tr></tbody></table><h3 id="系统视图" tabindex="-1">系统视图 <a class="header-anchor" href="#系统视图" aria-label="Permalink to &quot;系统视图&quot;">​</a></h3><table><thead><tr><th style="text-align:left;">系统视图</th><th style="text-align:left;"></th></tr></thead><tbody><tr><td style="text-align:left;"><code>v$database</code></td><td style="text-align:left;">可查询数据库信息</td></tr><tr><td style="text-align:left;"><code>v$tablespace</code></td><td style="text-align:left;">可查询表空间信息</td></tr><tr><td style="text-align:left;"><code>v$datafile</code></td><td style="text-align:left;">可查询数据文件信息</td></tr><tr><td style="text-align:left;"><code>v$dm_arch_ini</code></td><td style="text-align:left;">可查询归档信息</td></tr><tr><td style="text-align:left;"><code>v$dm_ini</code></td><td style="text-align:left;">可查询参数</td></tr><tr><td style="text-align:left;"><code>v$instance</code></td><td style="text-align:left;">可查询数据库实例信息</td></tr><tr><td style="text-align:left;"><code>v$rlogfile</code></td><td style="text-align:left;">可查询日志文件信息</td></tr><tr><td style="text-align:left;"><code>v$systeminfo</code></td><td style="text-align:left;">可查询操作系统CPU和内存的信息</td></tr><tr><td style="text-align:left;"><code>v$version</code></td><td style="text-align:left;">可查询数据库版本</td></tr><tr><td style="text-align:left;"><code>v$wait_class</code></td><td style="text-align:left;">可查询等待（wait）情况</td></tr></tbody></table>`,79),e=[o];function t(c,r,E,y,d,i){return l(),a("div",null,e)}const u=s(p,[["render",t]]);export{h as __pageData,u as default};
