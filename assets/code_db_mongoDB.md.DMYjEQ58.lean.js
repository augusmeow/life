import{_ as i,c as t,a3 as e,o as a}from"./chunks/framework.DDs3IadZ.js";const k=JSON.parse('{"title":"mongoDB","description":"","frontmatter":{"date":"2021-08-19T10:23:13.000Z"},"headers":[],"relativePath":"code/db/mongoDB.md","filePath":"code/db/mongoDB.md","lastUpdated":1686823313000}'),o={name:"code/db/mongoDB.md"};function n(d,s,p,l,h,r){return a(),t("div",null,s[0]||(s[0]=[e(`<h1 id="mongodb" tabindex="-1">mongoDB <a class="header-anchor" href="#mongodb" aria-label="Permalink to &quot;mongoDB&quot;">​</a></h1><h2 id="切换数据库" tabindex="-1">切换数据库 <a class="header-anchor" href="#切换数据库" aria-label="Permalink to &quot;切换数据库&quot;">​</a></h2><p><code>use test_augus</code>如果数据库不存在会自动创建 test_augus</p><p><code>show dbs</code> 查看所有数据库</p><p>新建数据库必须插入数据才会显示在列表中 <code>db.test_augus.insert({&quot;name&quot;:&quot;augus&quot;})</code></p><h2 id="user-op" tabindex="-1">user op <a class="header-anchor" href="#user-op" aria-label="Permalink to &quot;user op&quot;">​</a></h2><p><code>show users</code><code>db.createUser({user: &quot;ssss&quot;,pwd: &quot;oracle&quot;, roles: [ { role: &quot;root&quot;, db: &quot;admin&quot; } ]})</code></p><h2 id="find" tabindex="-1">find <a class="header-anchor" href="#find" aria-label="Permalink to &quot;find&quot;">​</a></h2><p><code>db[&quot;test_sensitive_0&quot;].find()</code><code>db.test_sensitive_0.find().count();</code><code>db.test_sensitive_0.find()</code><code>db.getSiblingDB(&quot;test_ddl&quot;).getCollection(&quot;test_xyz&quot;).find({ })</code><code>db.getCollection(&quot;test_xyz&quot;).find({}).limit(88)</code></p><h2 id="distinct" tabindex="-1">distinct <a class="header-anchor" href="#distinct" aria-label="Permalink to &quot;distinct&quot;">​</a></h2><p><code>db[&quot;test_sensitive_0&quot;].distinct(&#39;name&#39;)</code><code>db.test_xyz.distinct(&quot;name&quot;,{&quot;age&quot;:20})</code></p><p><code>db.revokeRolesFromUser( &quot;mongoTestAdmin&quot;, [ { role: &quot;read&quot;, db: &quot;admin&quot; }, &quot;readWrite&quot; ], { w: &quot;majority&quot; } )</code></p><p><code>db.updateUser( &quot;root&quot;,{pwd: &quot;oracle&quot;, roles: [ { role: &quot;read&quot;, db: &quot;test1&quot; } ]})</code><code>db.updateUser(&#39;root&#39;,{pwd:&#39;633636&#39;,roles:[{role:&#39;read&#39;,db:&#39;springbucks&#39;}]})</code></p><p><code>db.test_sensitive_0.updateOne( { type: &quot;book&quot;, item : &quot;journal&quot; }, { $set : { qty: 10 } }, { upsert :true } )</code></p><p><code>db.changeUserPassword(&quot;root&quot;,&quot;gag&quot;);</code></p><p><code>db.dropUser(&quot;ssss&quot;)</code></p><p><code>db.test_xyz.aggregate([{$group : {_id : &quot;$by_user&quot;, num_tutorial : {$sum : 1}}}])</code></p><p><code>db.test_xyz.insertOne({_id:&quot;faf&quot;,id:&quot;af&quot;,age:&quot;21&quot;,gender:&quot;male&quot;,name:&quot;gag&quot;})</code></p><p><code>db.test_sensitive_0.updateOne( { type: &quot;book&quot;, item : &quot;journal&quot; }, { $set : { qty: 10 } }, { upsert :true } )</code></p><p><code>db.test_sensitive_0.deleteOne({&#39;name&#39;:&#39;James&#39;})</code></p><p><code>db.test_xyz.insert( { _id: 14, type: &quot;misc&quot;, item: &quot;card&quot;, qty: 15 } )</code></p><p><code>show collections</code></p><p><code>db.createCollection(&quot;afafaff&quot;, { capped : true, size : 5242880, max : 5000 } )</code><code>db.log.drop()</code></p><p><code>db.createView( &quot;firstView&quot;, &quot;demo113&quot;, [ { $project: { &quot;Name&quot;: &quot;$Details.Name&quot;, Subject: 1 } } ])</code></p><p><code>db.test_xyz.createIndex({&#39;age&#39;:22})</code></p><p><code>db.log.drop()</code></p><p><code>show dbs db</code></p><p><code>use augus_drop db.augus_drop.insertOne({_id:1,name:&quot;test&quot;})</code><code>db.dropDatabase()</code></p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> test1 </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">db</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">createRole</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">role</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;afafa&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, privileges: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">resource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { cluster: true }, actions: [ &quot;addShard&quot; ] }, { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">resource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { db: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;config&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">collection</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }, actions: [ &quot;find&quot;, &quot;update&quot;, &quot;insert&quot;, &quot;remove&quot; ] }, { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">resource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { db: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;users&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">collection</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;usersCollection&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }, actions: [ &quot;update&quot;, &quot;insert&quot;, &quot;remove&quot; ] }, { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">resource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { db: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">collection</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }, actions: [ &quot;find&quot; ] }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], roles: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">role</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;read&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, db: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;test1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}, { w: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;majority&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> , wtimeout: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p><code>use test db.dropRole( &quot;readWrite&quot; )</code></p><p><code>db.createRole()</code></p><p><code>use admin db.createRole({role:&quot;mongostatMangeRole1&quot;,privileges:[{resource:{cluster:true},actions:[&quot;serverStatus&quot;]}]})</code></p><p><code>db.createRole({role:&quot;bigRole1&quot;,privileges:[{resource:{anyResource:true},actions:[&quot;anyAction&quot;]}],roles:[]})</code></p><p><code>db.dropRole(&quot;bigRole1&quot;)</code></p><p><code>db.grantRolesToUser(&quot;mongoTestAdmin&quot;, [{role:&quot;readWrite&quot;, db:&quot;admin&quot;}])</code></p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">db</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">grantRolesToRole</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mongoTestAdmin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[ &quot;write&quot; ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">db</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">grantRolesToRole</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mongoTestAdmin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[ &quot;productsReader&quot; ], { w: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;majority&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> , wtimeout: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div>`,37)]))}const c=i(o,[["render",n]]);export{k as __pageData,c as default};
